{"remainingRequest":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/babel-loader/lib/index.js!/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/src/components/RestaurantStart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/src/components/RestaurantStart.vue","mtime":1560536277735},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Auth } from 'aws-amplify';\nimport { AmplifyEventBus } from 'aws-amplify-vue';\nimport axios from 'axios';\nexport default {\n  name: 'RestaurantStart',\n  data: function data() {\n    return {\n      isLoading: false,\n      signedIn: false,\n\n      /*userRestaurant: Object,*/\n      session: Object,\n      restaurant: {\n        name: \"\",\n        email: \"\",\n        zip: \"\",\n        city: \"\",\n        address: \"\",\n        website: \"\",\n        cuisine: \"\",\n        price_range: \"\",\n        has_table_booking: false,\n        opening_hours: \"\",\n        type: \"\",\n        avg_price_for_two: \"\",\n        phone_number: \"\"\n      },\n      cities: [],\n      pickedCity: \"City\"\n    };\n  },\n  computed: {\n    userRestaurant: function userRestaurant() {\n      return this.$store.getters.userRestaurant;\n    },\n    userSession: function userSession() {\n      return this.$store.getters.userSession;\n    },\n    restaurantEmail: function restaurantEmail() {\n      return this.$store.getters.isUserSignedIn ? this.$store.getters.userRestaurant.attributes.email : \"blank@restaurant.com\";\n    },\n    isLoggedIn: function isLoggedIn() {\n      return this.$store.getters.isUserSignedIn;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.findUser();\n    AmplifyEventBus.$on('authState', function (info) {\n      if (info === \"signedIn\") {\n        _this.findUser();\n      } else {\n        /* TODO: surround w/ try/catch clauses */\n        _this.$store.commit('changeUserRestaurant', undefined);\n\n        _this.$store.commit('changeUserSession', undefined);\n      }\n    });\n    this.getCities();\n  },\n  methods: {\n    findUser: function () {\n      var _findUser = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = this.$store;\n                _context.next = 3;\n                return Auth.currentAuthenticatedUser();\n\n              case 3:\n                _context.t1 = _context.sent;\n\n                _context.t0.commit.call(_context.t0, 'changeUserRestaurant', _context.t1);\n\n                _context.t2 = this.$store;\n                _context.next = 8;\n                return Auth.currentSession();\n\n              case 8:\n                _context.t3 = _context.sent;\n\n                _context.t2.commit.call(_context.t2, 'changeUserSession', _context.t3);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function findUser() {\n        return _findUser.apply(this, arguments);\n      }\n\n      return findUser;\n    }(),\n    submitRestaurantData: function submitRestaurantData() {\n      var that = this;\n      that.isLoading = true;\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken()\n      };\n      axios.post('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile', that.restaurant, {\n        headers: headers\n      }).then(function (response) {\n        that.isLoading = false;\n        console.log(response);\n      });\n    },\n    getRestaurantData: function getRestaurantData() {\n      var that = this;\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken()\n      };\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile?accessToken=' + this.userSession.getAccessToken().getJwtToken(), {\n        headers: headers\n      }).then(function (response) {\n        console.log(response.data);\n      });\n    },\n    getCities: function getCities() {\n      var that = this;\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/city').then(function (resonse) {\n        that.cities = resonse.data.Items;\n        console.log(resonse.data.Items);\n      });\n    }\n  }\n};",{"version":3,"sources":["RestaurantStart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <b-container fluid class=\"h-100\">\n    <b-row>\n      <b-col cols='3'>\n        <b-button @click=\"getRestaurantData()\">GET restaurant data</b-button>\n      </b-col>\n      <b-col cols='6'>\n        <div id=\"restaurantInfoForm\" v-if=\"isLoggedIn\" align=\"center\">\n          <b-input type=\"text\" placeholder=\"Name\" name=\"name_field\" v-model=\"restaurant.name\" class=\"w-75\"></b-input>\n          <b-input type=\"email\" placeholder=\"Email\" name=\"email_field\" v-model=\"restaurant.email\" class=\"w-75\"></b-input>\n          <b-row class=\"w-75\">\n            <b-col cols=\"4\" class=\"w-100\" style=\"padding-left: 0px;\">\n              <b-input type=\"number\" placeholder=\"Zip code\" v-model=\"restaurant.zip\" pattern=\"^[0-9]{5}(?:-[0-9]{4})?$\" style=\"margin-left: 0px;\"></b-input>\n            </b-col>\n            <b-col cols=\"8\">\n              <b-form-select v-model=\"restaurant.city\" :options=\"cities\" style=\"margin: 16px\">\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>-- Please select your city --</option>\n                </template>\n              </b-form-select>\n            </b-col>\n            <b-col cols=\"4\">\n\n            </b-col>\n\n          </b-row>\n          <b-input type=\"text\" placeholder=\"Address\" v-model=\"restaurant.address\" class=\"w-75\"></b-input>\n          <b-input type=\"url\" placeholder=\"Website\" v-model=\"restaurant.website\" class=\"w-75\"></b-input>\n          <b-input type=\"text\" placeholder=\"Cuisine\" v-model=\"restaurant.cuisine\" class=\"w-75\"></b-input>\n          <b-input type=\"number\" placeholder=\"Price range\" v-model=\"restaurant.price_range\" pattern=\"^[0-9]-[0-9]$\" class=\"w-75\"></b-input>\n          <b-row class=\"w-75\">\n             <b-col cols=\"3\" style=\"padding-left: 0px;\"><label for=\"tableBookingCheckout\">Table booking: </label></b-col>\n             <b-col cols=\"3\"><b-form-checkbox id=\"tableBookingCheckout\" v-model=\"restaurant.hasTableBooking\"></b-form-checkbox></b-col>\n             <b-col cols=\"6\"></b-col>\n          </b-row>\n          <b-input type=\"text\" v-model=\"restaurant.opening_hours\" placeholder=\"Opening hours\" class=\"w-75\"></b-input>\n          <b-input type=\"text\" v-model=\"restaurant.type\" placeholder=\"Restaurant type\" class=\"w-75\"></b-input>\n          <b-input type=\"number\" v-model=\"restaurant.avg_price_for_two\" placeholder=\"Average price for two\" class=\"w-75\" ></b-input>\n          <b-input type=\"tel\" v-model=\"restaurant.phone_number\" placeholder=\"Phone number\" class=\"w-75\"></b-input>\n\n          <b-button @click=\"submitRestaurantData()\">\n          <div v-if=\"!isLoading\">Submit</div>\n          <b-spinner v-if=\"isLoading\" label=\"Loading...\"></b-spinner></b-button>\n\n\n        </div>\n        <amplify-authenticator v-if=\"!isLoggedIn\"></amplify-authenticator>\n      </b-col>\n      <b-col cols='3'>\n        <amplify-sign-out v-if=\"isLoggedIn\"></amplify-sign-out>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\nimport axios from 'axios'\n\nexport default {\n  name: 'RestaurantStart',\n  data: function() {\n    return {\n      isLoading: false,\n\n      signedIn: false,\n      /*userRestaurant: Object,*/\n      session: Object,\n\n      restaurant: {\n        name: \"\",\n        email: \"\",\n        zip: \"\",\n        city: \"\",\n        address: \"\",\n        website: \"\",\n        cuisine: \"\",\n        price_range: \"\",\n        has_table_booking: false,\n        opening_hours: \"\",\n        type: \"\",\n        avg_price_for_two: \"\",\n        phone_number: \"\",\n      },\n      cities: [],\n      pickedCity: \"City\",\n    }\n  },\n  computed: {\n    userRestaurant() { return this.$store.getters.userRestaurant },\n    userSession() { return this.$store.getters.userSession },\n    restaurantEmail() { return this.$store.getters.isUserSignedIn ? this.$store.getters.userRestaurant.attributes.email : \"blank@restaurant.com\"},\n    isLoggedIn() { return this.$store.getters.isUserSignedIn },\n  },\n  created() {\n    this.findUser();\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        this.findUser();\n      } else {\n        /* TODO: surround w/ try/catch clauses */\n        this.$store.commit('changeUserRestaurant', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n    });\n    this.getCities();\n  },\n  methods: {\n    async findUser() {\n      /* TODO: surround w/ try/catch clauses */\n      this.$store.commit('changeUserRestaurant', await Auth.currentAuthenticatedUser());\n      this.$store.commit('changeUserSession', await Auth.currentSession());\n    },\n    submitRestaurantData() {\n      var that = this;\n      that.isLoading = true;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      }\n\n      axios.post('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile', that.restaurant, { headers: headers })\n      .then((response) => {\n        that.isLoading = false;\n        console.log(response);\n      });\n    },\n    getRestaurantData() {\n      var that = this;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      };\n\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile?accessToken='\n        + this.userSession.getAccessToken().getJwtToken(), { headers: headers })\n          .then((response) => {\n            console.log(response.data);\n          });\n    },\n    getCities() {\n      var that = this;\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/city')\n        .then((resonse) => {\n          that.cities = resonse.data.Items;\n          console.log(resonse.data.Items);\n      });\n    },\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\ninput {\n  margin: 16px;\n}\n\n#restaurantInfoForm {\n  padding: 2%;\n  background-color: #e3e3e3;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}