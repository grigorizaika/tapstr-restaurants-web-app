{"remainingRequest":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/src/components/RestaurantStart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/src/components/RestaurantStart.vue","mtime":1561847441004},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-restaurants-web-app_current/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\nimport axios from 'axios'\n\nexport default {\n  name: 'RestaurantStart',\n  data: function() {\n    return {\n      isLoading: false,\n\n      signedIn: false,\n      /*userRestaurant: Object,*/\n      session: Object,\n\n      restaurant: {\n        name: \"\",\n        email: \"\",\n        zip: \"\",\n        city: \"\",\n        address: \"\",\n        website: \"\",\n        cuisine: \"\",\n        price_range: \"\",\n        has_table_booking: false,\n        opening_hours: \"\",\n        type: \"\",\n        avg_price_for_two: \"\",\n        phone_number: \"\",\n      },\n      cities: [],\n      pickedCity: \"City\",\n    }\n  },\n  computed: {\n    userRestaurant() { return this.$store.getters.userRestaurant },\n    userSession() { return this.$store.getters.userSession },\n    restaurantEmail() { return this.$store.getters.isUserSignedIn ? this.$store.getters.userRestaurant.attributes.email : \"blank@restaurant.com\"},\n    isLoggedIn() { return this.$store.getters.isUserSignedIn },\n  },\n  created() {\n    this.findUser();\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        this.findUser();\n      } else {\n        /* TODO: surround w/ try/catch clauses */\n        this.$store.commit('changeUserRestaurant', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n    });\n    this.getCities();\n  },\n  methods: {\n    async findUser() {\n      /* TODO: surround w/ try/catch clauses */\n      this.$store.commit('changeUserRestaurant', await Auth.currentAuthenticatedUser());\n      this.$store.commit('changeUserSession', await Auth.currentSession());\n    },\n    submitRestaurantData() {\n      var that = this;\n      that.isLoading = true;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      }\n\n      axios.post('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile', that.restaurant, { headers: headers })\n      .then((response) => {\n        that.isLoading = false;\n        console.log(response);\n      });\n    },\n    getRestaurantData() {\n      var that = this;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      };\n\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile?accessToken='\n        + this.userSession.getAccessToken().getJwtToken(), { headers: headers })\n          .then((response) => {\n            console.log(response.data);\n          });\n    },\n    getCities() {\n      var that = this;\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/city')\n        .then((resonse) => {\n          that.cities = resonse.data.Items;\n          console.log(resonse.data.Items);\n      });\n    },\n  }\n};\n",{"version":3,"sources":["RestaurantStart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RestaurantStart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid class=\"h-100\" id=\"restaurantStart\">\n    <b-row>\n      <b-col cols='3'>\n        <b-button @click=\"getRestaurantData()\">GET restaurant data</b-button>\n      </b-col>\n      <b-col cols='6'>\n        <div id=\"restaurantInfoForm\" v-if=\"isLoggedIn\" align=\"center\">\n          <b-input type=\"text\" placeholder=\"Name\" name=\"name_field\" v-model=\"restaurant.name\" class=\"w-75\"></b-input>\n          <b-input type=\"email\" placeholder=\"Email\" name=\"email_field\" v-model=\"restaurant.email\" class=\"w-75\"></b-input>\n          <b-row class=\"w-75\">\n            <b-col cols=\"4\" class=\"w-100\" style=\"padding-left: 0px;\">\n              <b-input type=\"number\" placeholder=\"Zip code\" v-model=\"restaurant.zip\" pattern=\"^[0-9]{5}(?:-[0-9]{4})?$\" style=\"margin-left: 0px;\"></b-input>\n            </b-col>\n            <b-col cols=\"8\">\n              <b-form-select v-model=\"restaurant.city\" :options=\"cities\" style=\"margin: 16px\">\n                <template slot=\"first\">\n                  <option :value=\"null\" disabled>-- Please select your city --</option>\n                </template>\n              </b-form-select>\n            </b-col>\n            <b-col cols=\"4\">\n\n            </b-col>\n\n          </b-row>\n          <b-input type=\"text\" placeholder=\"Address\" v-model=\"restaurant.address\" class=\"w-75\"></b-input>\n          <b-input type=\"url\" placeholder=\"Website\" v-model=\"restaurant.website\" class=\"w-75\"></b-input>\n          <b-input type=\"text\" placeholder=\"Cuisine\" v-model=\"restaurant.cuisine\" class=\"w-75\"></b-input>\n          <b-input type=\"number\" placeholder=\"Price range\" v-model=\"restaurant.price_range\" pattern=\"^[0-9]-[0-9]$\" class=\"w-75\"></b-input>\n          <b-row class=\"w-75\">\n             <b-col cols=\"3\" style=\"padding-left: 0px;\"><label for=\"tableBookingCheckout\">Table booking: </label></b-col>\n             <b-col cols=\"3\"><b-form-checkbox id=\"tableBookingCheckout\" v-model=\"restaurant.hasTableBooking\"></b-form-checkbox></b-col>\n             <b-col cols=\"6\"></b-col>\n          </b-row>\n          <b-input type=\"text\" v-model=\"restaurant.opening_hours\" placeholder=\"Opening hours\" class=\"w-75\"></b-input>\n          <b-input type=\"text\" v-model=\"restaurant.type\" placeholder=\"Restaurant type\" class=\"w-75\"></b-input>\n          <b-input type=\"number\" v-model=\"restaurant.avg_price_for_two\" placeholder=\"Average price for two\" class=\"w-75\" ></b-input>\n          <b-input type=\"tel\" v-model=\"restaurant.phone_number\" placeholder=\"Phone number\" class=\"w-75\"></b-input>\n\n          <b-button @click=\"submitRestaurantData()\">\n          <div v-if=\"!isLoading\">Submit</div>\n          <b-spinner v-if=\"isLoading\" label=\"Loading...\"></b-spinner></b-button>\n\n\n        </div>\n        <amplify-authenticator v-if=\"!isLoggedIn\"></amplify-authenticator>\n      </b-col>\n      <b-col cols='3'>\n        <amplify-sign-out v-if=\"isLoggedIn\"></amplify-sign-out>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\nimport axios from 'axios'\n\nexport default {\n  name: 'RestaurantStart',\n  data: function() {\n    return {\n      isLoading: false,\n\n      signedIn: false,\n      /*userRestaurant: Object,*/\n      session: Object,\n\n      restaurant: {\n        name: \"\",\n        email: \"\",\n        zip: \"\",\n        city: \"\",\n        address: \"\",\n        website: \"\",\n        cuisine: \"\",\n        price_range: \"\",\n        has_table_booking: false,\n        opening_hours: \"\",\n        type: \"\",\n        avg_price_for_two: \"\",\n        phone_number: \"\",\n      },\n      cities: [],\n      pickedCity: \"City\",\n    }\n  },\n  computed: {\n    userRestaurant() { return this.$store.getters.userRestaurant },\n    userSession() { return this.$store.getters.userSession },\n    restaurantEmail() { return this.$store.getters.isUserSignedIn ? this.$store.getters.userRestaurant.attributes.email : \"blank@restaurant.com\"},\n    isLoggedIn() { return this.$store.getters.isUserSignedIn },\n  },\n  created() {\n    this.findUser();\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        this.findUser();\n      } else {\n        /* TODO: surround w/ try/catch clauses */\n        this.$store.commit('changeUserRestaurant', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n    });\n    this.getCities();\n  },\n  methods: {\n    async findUser() {\n      /* TODO: surround w/ try/catch clauses */\n      this.$store.commit('changeUserRestaurant', await Auth.currentAuthenticatedUser());\n      this.$store.commit('changeUserSession', await Auth.currentSession());\n    },\n    submitRestaurantData() {\n      var that = this;\n      that.isLoading = true;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      }\n\n      axios.post('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile', that.restaurant, { headers: headers })\n      .then((response) => {\n        that.isLoading = false;\n        console.log(response);\n      });\n    },\n    getRestaurantData() {\n      var that = this;\n\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': this.userSession.getIdToken().getJwtToken(),\n      };\n\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/venue-profile?accessToken='\n        + this.userSession.getAccessToken().getJwtToken(), { headers: headers })\n          .then((response) => {\n            console.log(response.data);\n          });\n    },\n    getCities() {\n      var that = this;\n      axios.get('https://axqeajmn83.execute-api.eu-central-1.amazonaws.com/dev/city')\n        .then((resonse) => {\n          that.cities = resonse.data.Items;\n          console.log(resonse.data.Items);\n      });\n    },\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#restaurantStart {\n  padding-top: 32px;\n}\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\ninput {\n  margin: 16px;\n}\n\n#restaurantInfoForm {\n  padding: 2%;\n  background-color: #e3e3e3;\n}\n\n</style>\n"]}]}